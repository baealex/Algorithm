<html>
<body>
<style>
#map {
    border: 1px solid #eee;
    box-shadow: 5px 0 5px 0 rgba(0,0,0,0.1);
    width:100%;
    height:300px;
    position:relative;
    overflow-x:scroll;
}
#map div {
    position:absolute;
    display:inline-block;
	width:4px;
	height:4px;
	background-color:red;
	border-radius:50%;
}
</style>

<h1>Realtime Graph <small>(<span id="x">0</span>)</small></h1>
<div id="map">
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
var name = "Client-"+Math.floor(Math.random()*1000);
var socket = io();

socket.on('connect', function() {
	socket.emit('hello_my_name_is', name);
});

socket.emit('ok_nice_to_meet_you');

socket.on('hi', function(data) {
	alert(data);
});

socket.on('graph_data', function(data) {
	var mapDiv = document.getElementById('map');
	var pointDiv = document.createElement('div');
	var xSpan = document.getElementById('x');
	xSpan.textContent = data.x;

	pointDiv.style.left = data.x + 'px';
	pointDiv.style.top = data.y + 'px';

	mapDiv.appendChild(pointDiv);
	mapDiv.scrollLeft = mapDiv.scrollWidth;
});
</script>
</body>
</html>
